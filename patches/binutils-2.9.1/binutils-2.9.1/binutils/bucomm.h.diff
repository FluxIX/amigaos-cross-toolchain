--- binutils-2.9.1/binutils/bucomm.h	Fri May  1 08:49:31 1998
+++ binutils-2.9.1/binutils/bucomm.h	Sun Aug 23 00:00:00 1998
@@ -96,11 +96,11 @@ extern char *getenv ();
 #define SEEK_END 2
 #endif
 
-#ifdef __GNUC__
+#if defined (__GNUC__) && !defined (C_ALLOCA)
 # undef alloca
 # define alloca __builtin_alloca
 #else
-# if HAVE_ALLOCA_H
+# if defined (HAVE_ALLOCA_H) && !defined (C_ALLOCA)
 #  include <alloca.h>
 # else
 #  ifndef alloca /* predefined by HP cc +Olibcalls */
